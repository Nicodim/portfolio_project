"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[802],{6861:function(e,s,a){a.r(s),a.d(s,{default:function(){return le}});var t=a(7294),i=a(2327),r=a(9250),n=a(2060),d=a(8281),c=a(5893);const l=(0,t.lazy)((()=>a.e(272).then(a.bind(a,9272)))),o=e=>(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(d.O,{width:"100%",height:140}),children:(0,c.jsx)(l,{...e})});var m=a(3007),x=a(7499),u=a(526),j=a(6452),g=a(8969);const h=a(6628).p.injectEndpoints({endpoints:e=>({getArticleRecommendationsList:e.query({query:e=>({url:"/articles",params:{_limit:e,_expand:"user"}})})})}).useGetArticleRecommendationsListQuery,p=(0,t.memo)((e=>{const{className:s}=e,{t:a}=(0,i.$)(),{isLoading:t,data:r,error:d}=h(3);return t||d||!r?null:(0,c.jsxs)(j.g,{gap:"8",className:(0,m.A)("",{},[s]),children:[(0,c.jsx)(x.zJ,{feature:"isAppRedesigned",on:(0,c.jsx)(g.x,{size:"l",title:a("Recommendations")}),off:(0,c.jsx)(u.xv,{size:u.yH.L,title:a("Recommendations")})}),(0,c.jsx)(n.wD,{articles:r,target:"_blank"})]})}));var f=a(5290),v=a(9864),C=a(7647),N=a(2896),A="adu8fSDx",w=a(7779),L=a(4268);const b=(0,L.hg)("articleDetails/fetchCommentsByArticleId",(async(e,s)=>{const{extra:a,rejectWithValue:t}=s;if(!e)return t("error");try{const s=await a.api.get("/comments",{params:{articleId:e,_expand:"user"}});if(!s.data)throw new Error;return s.data}catch(e){return t("error")}})),y=(0,L.HF)({selectId:e=>e.id}),z=y.getSelectors((e=>e.articleDetailsPage?.comments||y.getInitialState())),k=(0,L.oM)({name:"articleDetailsCommentsSlice",initialState:y.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:e=>{e.addCase(b.pending,(e=>{e.error=void 0,e.isLoading=!0})).addCase(b.fulfilled,((e,s)=>{e.isLoading=!1,y.setAll(e,s.payload)})).addCase(b.rejected,((e,s)=>{e.isLoading=!1,e.error=s.payload}))}}),{reducer:R}=k,I=(0,L.hg)("articleDetailsPage/fetchArticleRecommendations",(async(e,s)=>{const{extra:a,rejectWithValue:t}=s;try{const e=await a.api.get("/articles",{params:{_limit:4}});if(!e.data)throw new Error;return e.data}catch(e){return t("error")}})),S=(0,L.HF)({selectId:e=>e.id}),D=(S.getSelectors((e=>e.articleDetailsPage?.recommendations||S.getInitialState())),(0,L.oM)({name:"articleDetailsPageRecommendationsSlice",initialState:S.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:e=>{e.addCase(I.pending,(e=>{e.error=void 0,e.isLoading=!0})).addCase(I.fulfilled,((e,s)=>{e.isLoading=!1,S.setAll(e,s.payload)})).addCase(I.rejected,((e,s)=>{e.isLoading=!1,e.error=s.payload}))}})),{reducer:E}=D,q=(0,w.UY)({recommendations:E,comments:R});var U=a(743),O=a(776),J=a(1066),P=a(9085),H=a(5146),Z=a(7184),$=a(7231),_=a(6265),F={CommentCard:"xIHByGcu",header:"dsH_3Oqu",username:"dw82WMzO",loading:"V0iZ1Un3"};const T=(0,t.memo)((e=>{const{className:s,comment:a,isLoading:t}=e,i=(0,x.tn)({name:"isAppRedesigned",on:()=>_.O,off:()=>d.O});return t?(0,c.jsxs)(j.g,{gap:"8",max:!0,className:(0,m.A)(F.CommentCard,{},[s,F.loading]),children:[(0,c.jsxs)("div",{className:F.header,children:[(0,c.jsx)(i,{width:30,height:30,border:"50%"}),(0,c.jsx)(i,{height:16,width:100,className:F.username})]}),(0,c.jsx)(i,{className:F.text,width:"100%",height:50})]}):a?(0,c.jsx)(x.zJ,{feature:"isAppRedesigned",on:(0,c.jsx)($.Z,{padding:"24",border:"partial",max:!0,children:(0,c.jsxs)(j.g,{gap:"8",max:!0,className:(0,m.A)(F.CommentCardRedesigned,{},[s]),children:[(0,c.jsx)(H.F,{to:(0,O.CJ)(a.user.id),children:(0,c.jsxs)(j.U,{gap:"8",children:[a.user.avatar?(0,c.jsx)(Z.q,{size:30,src:a.user.avatar}):null,(0,c.jsx)(g.x,{text:a.user.username,bold:!0})]})}),(0,c.jsx)(g.x,{text:a.text})]})}),off:(0,c.jsxs)(j.g,{gap:"8",max:!0,className:(0,m.A)(F.CommentCard,{},[s]),children:[(0,c.jsxs)(J.F,{to:(0,O.CJ)(a.user.id),className:F.header,children:[a.user.avatar?(0,c.jsx)(P.q,{size:30,src:a.user.avatar}):null,(0,c.jsx)(u.xv,{className:F.username,title:a.user.username})]}),(0,c.jsx)(u.xv,{className:F.text,text:a.text})]})}):null})),V=(0,t.memo)((e=>{const{className:s,comments:a,isLoading:t}=e,{t:r}=(0,i.$)();return t?(0,c.jsxs)(j.g,{gap:"16",max:!0,className:(0,m.A)("",{},[s]),children:[(0,c.jsx)(T,{isLoading:!0}),(0,c.jsx)(T,{isLoading:!0}),(0,c.jsx)(T,{isLoading:!0})]}):(0,c.jsx)(j.g,{gap:"16",max:!0,className:(0,m.A)("",{},[s]),children:a?.length?a.map((e=>(0,c.jsx)(T,{comment:e,isLoading:t},e.id))):(0,c.jsx)(x.zJ,{feature:"isAppRedesigned",on:(0,c.jsx)(g.x,{text:r("No comments")}),off:(0,c.jsx)(u.xv,{text:r("No comments")})})})})),W=(0,t.lazy)((()=>a.e(77).then(a.bind(a,8077))));var B=a(5401),M=a(9970),G=a(7953);const K=e=>e.articleDetailsPage?.comments?.isLoading;var Q=a(2135);const X=(0,L.hg)("articleDetails/addCommentForArticle",(async(e,s)=>{const{extra:a,dispatch:t,rejectWithValue:i,getState:r}=s,d=(0,Q.m5)(r()),c=(0,n.wq)(r());if(!d||!e||!c)return i("no data");try{const s=await a.api.post("/comments",{articleId:c.id,userId:d.id,text:e});if(!s.data)throw new Error;return t(b(c.id)),s.data}catch(e){return i("error")}})),Y=(0,t.memo)((e=>{const{className:s,id:a}=e,{t:r}=(0,i.$)(),n=(0,U.v9)(z.selectAll),d=(0,U.v9)(K),l=(0,B.T)(),o=(0,t.useCallback)((e=>{l(X(e))}),[l]);return(0,M.Q)((()=>{l(b(a))})),(0,c.jsxs)(j.g,{gap:"16",max:!0,className:(0,m.A)("",{},[s]),children:[(0,c.jsx)(x.zJ,{feature:"isAppRedesigned",on:(0,c.jsx)(g.x,{size:"l",title:r("Comments")}),off:(0,c.jsx)(u.xv,{size:u.yH.L,title:r("Comments")})}),(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(G.a,{}),children:(0,c.jsx)(W,{onSendComment:o})}),(0,c.jsx)(V,{comments:n,isLoading:d})]})}));var ee=a(7702);const se=(0,a(2222).P1)(n.wq,Q.m5,((e,s)=>!(!e||!s)&&e.user.id===s.id)),ae=(0,t.memo)((e=>{const{className:s}=e,{t:a}=(0,i.$)(),d=(0,r.s0)(),l=(0,U.v9)(n.wq),o=(0,U.v9)(se),x=(0,t.useCallback)((()=>{d((0,O.k7)())}),[d]),u=(0,t.useCallback)((()=>{l&&d((0,O.mK)(l.id))}),[l,d]);return(0,c.jsxs)(j.U,{max:!0,justify:"between",className:(0,m.A)("",{},[s]),children:[(0,c.jsx)(ee.zx,{theme:ee.bn.OUTLINE,onClick:x,children:a("Back to list")}),o&&(0,c.jsx)(ee.zx,{theme:ee.bn.OUTLINE,onClick:u,children:a("Edit")})]})}));var te=a(8190);const ie=(0,t.memo)((e=>{const{className:s,author:a,views:t,createdAt:r,onEdit:n}=e,{t:d}=(0,i.$)();return(0,c.jsxs)(j.g,{gap:"32",className:s,children:[(0,c.jsxs)(j.U,{gap:"8",children:[(0,c.jsx)(Z.q,{src:a.avatar,size:32}),(0,c.jsx)(g.x,{text:a.username,bold:!0}),(0,c.jsx)(g.x,{text:r})]}),(0,c.jsx)(te.z,{onClick:n,children:d("Edit")}),(0,c.jsx)(g.x,{text:d("{{count}} views",{count:t})})]})}));const re=(0,t.memo)((()=>{const e=(0,U.v9)(n.wq),s=(0,r.s0)(),a=(0,t.useCallback)((()=>{e&&s((0,O.mK)(e.id))}),[e,s]);return e?(0,c.jsx)($.Z,{padding:"24",border:"partial",className:"VfnX1ntZ",children:(0,c.jsx)(ie,{onEdit:a,author:e.user,createdAt:e.createdAt,views:e.views})}):null})),ne=(0,t.memo)((e=>{const{className:s}=e,{id:a}=(0,r.UO)();return(0,c.jsx)($.Z,{max:!0,border:"partial",className:s,padding:"24",children:(0,c.jsx)(n.D0,{id:a})})})),de={articleDetailsPage:q},ce=e=>{const{className:s}=e,{t:a}=(0,i.$)("article-details"),{id:t}=(0,r.UO)();return t?(0,c.jsx)(v.W,{reducers:de,removeAfterUnmount:!0,children:(0,c.jsx)(x.zJ,{feature:"isAppRedesigned",on:(0,c.jsx)(f.w,{content:(0,c.jsx)(N.T,{className:(0,m.A)(A,{},[s]),children:(0,c.jsxs)(j.g,{gap:"16",max:!0,children:[(0,c.jsx)(ne,{}),(0,c.jsx)(o,{articleId:t}),(0,c.jsx)(p,{}),(0,c.jsx)(Y,{id:t})]})}),right:(0,c.jsx)(re,{})}),off:(0,c.jsx)(N.T,{className:(0,m.A)(A,{},[s]),children:(0,c.jsxs)(j.g,{gap:"16",max:!0,children:[(0,c.jsx)(ae,{}),(0,c.jsx)(n.D0,{id:t}),(0,c.jsx)(x.zJ,{feature:"isArticleRatingEnabled",on:(0,c.jsx)(o,{articleId:t}),off:(0,c.jsx)(C.Z,{children:a("Article ratings coming soon!")})}),(0,c.jsx)(p,{}),(0,c.jsx)(Y,{id:t})]})})})}):null};var le=(0,t.memo)(ce)}}]);